<!-- JAVASCRIPT NOTES -->
<html>
<script>
function sendRequest(input_data){
  console.log(JSON.stringify(input_data))
  $.ajax({
      url: "https://appt-tstx-fcistg.api.lumin.ai/lead/demo-sms",
      type: 'POST',
      dataType: 'json',
      contentType: 'application/x-www-form-urlencoded',
      processData: false,
      data: JSON.stringify(input_data),
      // data: $("#registerSubmit").serialize(),
      // data: '{"lead_email": "a@b.com", "token": "saoeutn23htnuo", "surname": "Kern", "given_name": "Avrana", "lead_phone": "11011011001"}',
      // data: '{"lead_email":' + $("#lead_email").val() + ', "token": ' + $("#token").val() + ', "surname": '+ $("#surname").val() +', "given_name": '+ $("#given_name").val() + ', "lead_phone": '+$("#lead_phone").val()+'}',
      success: function (data) {
        alert(JSON.stringify(data));
      },
      error: function(){
        alert("Cannot get data");
      }
  });
};

function onSubmit(event){
  // var given_name = document.forms["demoForm"]["given_name"].value;
  // var surname = document.forms["demoForm"]["surname"].value;
  // var lead_phone = document.forms["demoForm"]["lead_phone"].value;
  // var lead_email = document.forms["demoForm"]["lead_email"].value;
  // var token = document.forms["demoForm"]["token"].value;
  // event.preventDefault()
  // console.log($("#given_name").val())

  sendRequest(input_data)
}
$("form").submit(function(event){
  event.preventDefault();
  var error = false;
  var input_data = {
    "lead_email": $("#lead_email").val(),
    "token": $("#token").val(),
    "surname": $("#surname").val(),
    "given_name": $("#given_name").val(),
    "lead_phone": $("#lead_phone").val()
  }
  for(var key in input_data){
    console.log('getting here')
    if(input_data[key] === "" || input_data[key].includes("*")){
      error = true;
      alert("Please fill in all fields");
      return
      // console.log('ERROR!')
    } 
  }
  if(error === false) {
    console.log('getting here 3')
    alert("Submitted");
    sendRequest(input_data)
  }
});

</script>
</html>